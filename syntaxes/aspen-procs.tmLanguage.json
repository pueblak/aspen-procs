{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "ASPEN PROCS",
	"fileTypes": [
		".EXT"
	],
	"patterns": [
		{ "include": "#comments" },
		{ "include": "#labels" },
		{ "include": "#variables" },
		{ "include": "#keywords" },
		{ "include": "#storages" },
		{ "include": "#synonyms" },
		{ "include": "#constants" },
		{ "include": "#strings" },
		{ "include": "#escape" }
	],
	"repository": {
		"constants": {
			"patterns": [{
				"name": "constant.character.numeric.aspen-procs",
				"match": "-?\\b\\d+(\\.\\d+)?\\b"
			},
			{
				"name": "keyword.control.common.aspen-procs",
				"match": "\\b(YES|NO|AUTO|NO_HALT)\\b"
			}]
		},
		"variables": {
			"patterns": [{
				"name": "support.function.synoynm.aspen-procs",
				"match": "^((S\\s+AS)|(S\\s+DS)|(C\\s+IC)|(C\\s+DC))\\s+([a-zA-Z_](\\w|-)*)",
				"captures": {
					"1": {
						"name": "keyword.control.reference.aspen-procs"
					},
					"2": {
						"name": "support.function.declare.aspen-procs"
					},
					"6": {
						"patterns": [{
							"name": "keyword.control.reserved.aspen-procs",
							"match": "LDA\\$\\$\\$|ASPEN_HOME|AUTHNO|COBOL(PGM|_SUFFIX|_TAIL)?|COL|DATE|DEOP|EOPMESS|LINK(DATE|TIME)|MENUHEAD|(MAIN|NEXT)MENU|MODE|OS|PATH|PROCDUMP|PROMPT_VAL|RMRC|ROW|RUNPATH|ST_DIR|START|SYSRC|TERMNO|TIME|USER(ID|TERM)|ARGS_\\d+|RETURN"
						}]
					}
				}
			},
			{
				"name": "support.function.read.aspen-procs",
				"match": "^(\\/\\s+RD)\\s+(\\(\\d+\\s*,\\s*\\d+\\)\\s+)?([a-zA-Z_](\\w|-)*)",
				"captures": {
					"1": {
						"name": "keyword.control.read.aspen-procs"
					},
					"2": {
						"name": "constant.character.numeric.aspen-procs"
					},
					"3": {
						"patterns": [{
							"name": "keyword.control.reserved.aspen-procs",
							"match": "LDA\\$\\$\\$|ASPEN_HOME|AUTHNO|COBOL(PGM|_SUFFIX|_TAIL)?|COL|DATE|DEOP|EOPMESS|LINK(DATE|TIME)|MENUHEAD|(MAIN|NEXT)MENU|MODE|OS|PATH|PROCDUMP|PROMPT_VAL|RMRC|ROW|RUNPATH|ST_DIR|START|SYSRC|TERMNO|TIME|USER(ID|TERM)|ARGS_\\d+|RETURN"
						}]
					}
				}
			}]
		},
		"synonyms": {
			"patterns": [{
				"name": "constant.character.reference.aspen-procs",
				"match": "@+[a-zA-Z_](\\w|-)*\\.*((?=$)|(?=[\\s\\w:(@\")\\]}]))"
			},
			{
				"name": "constant.character.special.aspen-procs",
				"match": "@(\\$(\\d+|(@+[a-zA-Z_](\\w|-)*\\.*)))((?=$)|(?=[\\s\\w:(@\")\\]}]))"
			}]
		},
		"labels": {
			"patterns": [{
				"name": "variable.parameter.label.aspen-procs",
				"match": "^:.{1,10}\\s*$"
			},
			{
				"name": "invalid.deprecated.too-long.aspen-procs",
				"match": "^:.{11,}\\s*$"
			},
			{
				"name": "support.class.success.aspen-procs",
				"match": "(\\((\\w|-|\\.)+\\))|(\\((\\w|-|\\.)*(?=@))|((?<=\\.)(\\w|-|\\.)*\\))"
			},
			{
				"name": "invalid.illegal.failure.aspen-procs",
				"match": "(\\[(\\w|-|\\.|,)+\\])|(\\[(\\w|-|\\.|,)*(?=@))|((?<=\\.)(\\w|-|\\.|,)*\\])"
			},
			{
				"name": "variable.parameter.transfer.aspen-procs",
				"match": "(\\{(\\w|-|\\.)+\\})|(\\{(\\w|-|\\.)*(?=@))|((?<=\\.)(\\w|-|\\.)*\\})"
			},
			{
				"name": "variable.parameter.plaintext.aspen-procs",
				"match": "((?<=\\.)((\\w|-|\\.)+)(?=@))"
			}]
		},
		"storages": {
			"patterns": [{
				"name": "storage.type.aspen-procs",
				"match": "@*\\b(\\d+)(:\\d+)?[^G]\\b"
			},
			{
				"name": "storage.modifier.aspen-procs",
				"match": "@*\\b(\\d+|[a-zA-Z_]\\w*\\.?)(:\\d+)?G\\b"
			}]
		},
		"keywords": {
			"patterns": [{
				"name": "keyword.control.command.aspen-procs",
				"match": "(^(S (AS|DS)|C (IC|DC)|F (CR|DL|EX)|\\/ (DI|CC|CS|CL|DL|PS)|G AG|L AL|!|#|\\?|&( \\$)?))|(\\b(EQ|GT|LT|NE|GE|LE)\\b)|((\\/ RD(\\s+\\(\\d+\\s*,\\s*\\d+\\))?)(?=\\s))"
			},
			{
				"name": "keyword.control.reserved.aspen-procs",
				"match": "(?<!\\w)@?(LDA\\$\\$\\$|ASPEN_HOME|AUTHNO|COBOL(PGM|_SUFFIX|_TAIL)?|COL|DATE|DEOP|EOPMESS|LINK(DATE|TIME)|MENUHEAD|(MAIN|NEXT)MENU|MODE|OS|PATH|PROCDUMP|PROMPT_VAL|RMRC|ROW|RUNPATH|ST_DIR|START|SYSRC|TERMNO|TIME|USER(ID|TERM)|ARGS_\\d+|RETURN)\\b\\.?"
			},
			{
				"name": "constant.character.access.aspen-procs",
				"match": "(?<!^\/ RD )(((\\$|\\d*:)\\d+\\b)|(\\((L|R|\\d+)\\s*,\\s*(\\d+|@(\\w|-|\\.)+)\\)\\.?))|(?<!^)\\*|\\.+",
				"captures": {
					"5": {
						"patterns": [{
							"name": "keyword.control.access.aspen-procs",
							"match": "(L|R)"
						}]
					}
				}
			},
			{
				"name": "constant.character.file.aspen-procs",
				"match": "^(\\$)((\\$\\s*$)|(\\s+(\\S+)\\s+(A|N)))",
				"captures": {
					"1": {
						"name": "keyword.control.file.aspen-procs"
					},
					"3": {
						"name": "keyword.control.file.aspen-procs"
					},
					"5": {
						"patterns": [{
							"include": "#synonyms"
						},
						{
							"include": "#storages"
						},
						{
							"include": "#strings"
						},
						{
							"include": "#escape"
						}]
					},
					"6": {
						"name": "keyword.control.file.aspen-procs"
					}
				}
			},
			{
				"name": "keyword.control.command.aspen-procs",
				"match": "^#\\s*(.+)$",
				"captures": {
					"1": {
						"name": "markup.raw.aspen-procs",
						"patterns": [{
							"include": "#synonyms"
						},
						{
							"include": "#storages"
						},
						{
							"include": "#strings"
						},
						{
							"include": "#escape"
						}]
					}
				}
			}]
		},
		"strings": {
			"name": "string.quoted.double.aspen-procs",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.aspen-procs",
					"match": "\\\\."
				}
			]
		},
		"comments": {
			"patterns": [{
				"name": "comment.line.aspen-procs",
				"match": "^\\*.*"
			}]
		},
		"escape": {
			"patterns": [{
				"name": "entity.name.function.macro.aspen-procs",
				"match": "\\^."
			}]
		}
	},
	"scopeName": "source.aspen-procs"
}